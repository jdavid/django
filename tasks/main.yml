# Merge default configuration with role parameters
- include: "config.yml"

# Pull, and find out instance name
- include: "root.yml"
- include: "name.yml"
- include: "pull.yml"
  when: django_pull|bool

# Variables (facts)
- include: "domains.yml"
- include: "pythonpath.yml"

# Action
- include: "dirs.yml"
- include: "pip.yml"
- include: "settings.yml"
- include: "manage.yml"
- include: "database.yml"
- include: "node_modules.yml"

# uvicorn, nginx, monit
- include: "uvicorn.yml"

- include: "static.yml"
  when: django_web

- debug: var=django_web

- include: "nginx.yml"
  when: django_web

- include: "monit.yml"
  when: django_with_monit|bool
